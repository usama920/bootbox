import{r as y,c as r,a as _,u as V,w as C,F as N,o as c,X as D,b as t,d as M,t as i,e as q,v as B,n as g,O as f,f as F}from"./app-62563c6d.js";import{_ as O}from"./AuthenticatedLayout-ece7c09d.js";import{_ as T}from"./Pagination-96c26275.js";import{_ as A}from"./ModalDialog-7bfa3a2e.js";import{c as Q}from"./common-574032ff.js";const z=t("div",{class:"flex justify-between py-2"},[t("div",{class:"text-[25px]"},"Newsletter Email Content")],-1),I=t("div",{class:"flex justify-between py-2"},[t("div",{class:"text-[25px]"},"Send Email")],-1),L={class:"flex flex-col overflow-x-auto"},X={class:"sm:-mx-6 lg:-mx-8"},G={class:"inline-block min-w-full py-2 sm:px-6 lg:px-8"},H={class:"overflow-x-auto"},J={class:"min-w-full text-left text-sm font-light"},K=t("thead",null,[t("tr",{class:"border-b whitespace-nowrap bg-gray-50 text-left text-xs font-semibold uppercase tracking-wide text-gray-500"},[t("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," #No "),t("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Name "),t("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Email "),t("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Status "),t("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Action ")])],-1),P={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},W={class:"text-gray-900 whitespace-no-wrap"},Y={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},Z={class:"text-gray-900 whitespace-no-wrap"},tt={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},et={class:"text-gray-900 whitespace-no-wrap"},st={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},at={class:"text-gray-900 whitespace-no-wrap"},ot={key:0,class:"text-red-600 font-bold"},lt={key:1,class:"text-yellow-600 font-bold"},rt={key:2,class:"text-green-600 font-bold"},ct={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},it={class:"flex items-center space-x-2 text-white mx-auto"},dt=["onClick","disabled"],nt=["onClick","disabled"],bt={key:0,class:"flex flex-col items-center border-t bg-white px-5 py-5 xs:flex-row xs:justify-between"},xt={key:1,class:"text-lg p-5 text-center"},pt={class:"space-y-2 px-4 text-lg"},ut=t("label",{class:"text-base text-black font-bold"},"Name:",-1),_t={class:"p-2 text-base bg-gray-200 text-black font-bold rounded border border-black"},yt=t("label",{class:"text-base"},"Email:",-1),gt={class:"p-2 text-base bg-gray-200 text-black font-bold rounded border border-black"},ft=t("label",{class:"text-base"},"Question:",-1),ht={class:"p-2 text-base bg-gray-200 text-black font-bold rounded border border-black"},mt=t("label",{class:"text-base"},"Comment:",-1),vt={class:"p-2 text-base bg-gray-200 text-black font-bold rounded border border-black"},kt=t("label",{class:"text-base"},"Reply:",-1),Ct=t("br",null,null,-1),Nt={class:"flex justify-end p-4"},$t=["disabled"],Ut={__name:"UserContact",props:{user_contact:Object},setup(n){const w=n,{Toast:b,ConfirmToast:E}=Q();y([]);const a=y(!1),o=y({name:"",id:"",question:"",comment:"",status:"",reply:""}),R=()=>{f.visit("/all-contacts")},j=l=>{l&&E.fire({}).then(s=>{s.isConfirmed===!0&&(a.value=!0,axios.delete("/user-contact/"+l).then(d=>{d.data.success&&(b.fire({icon:"success",title:"User Contact Deleted"}),f.visit("/all-contacts"))}).finally(()=>{a.value=!1}))})},S=l=>{l.reply?(a.value=!0,axios.post("/user-contact-reply",o.value).then(s=>{s.data.success&&(b.fire({icon:"success",title:"Email Sent"}),$("#viewContact").modal("hide"),f.visit("/all-contacts"))}).finally(()=>{a.value=!1}).catch(s=>{b.fire({icon:"error",title:"something went wrong"})})):b.fire({icon:"error",title:"Reply Required"})},U=l=>{axios.get("/change-status/"+l).then(s=>{if(s.data.success){let d=w.user_contact.data.filter(x=>x.id===l);o.value=d[0],o.value.reply="",$("#viewContact").modal("show")}})};return(l,s)=>(c(),r(N,null,[_(V(D),{title:"Users"}),_(O,null,{default:C(()=>{var d,x,h,m;return[z,I,t("div",L,[t("div",X,[t("div",G,[t("div",H,[t("table",J,[K,t("tbody",null,[(c(!0),r(N,null,M((d=n.user_contact)==null?void 0:d.data,(e,p)=>(c(),r("tr",{key:e==null?void 0:e.id,class:"text-gray-700"},[t("td",P,[t("p",W,i(p+1),1)]),t("td",Y,[t("p",Z,i(e==null?void 0:e.name),1)]),t("td",tt,[t("p",et,i(e==null?void 0:e.email),1)]),t("td",st,[t("p",at,[(e==null?void 0:e.status)==="1"?(c(),r("span",ot,"Unread")):(e==null?void 0:e.status)==="2"?(c(),r("span",lt,"Read")):(e==null?void 0:e.status)==="3"?(c(),r("span",rt,"Replied")):F("",!0)])]),t("td",ct,[t("div",it,[t("button",{onClick:u=>U(e==null?void 0:e.id),class:g([{"opacity-50":a.value},"py-1 rounded px-3 bg-green-500 hover:bg-green-600 cursor-pointer"]),disabled:a.value},"View & Reply",10,dt),t("button",{onClick:u=>j(e==null?void 0:e.id),class:g([{"opacity-50":a.value},"py-1 px-3 bg-red-500 rounded hover:bg-red-600 cursor-pointer"]),disabled:a.value},"Delete",10,nt)])])]))),128))])]),((h=(x=n.user_contact)==null?void 0:x.data)==null?void 0:h.length)!==0?(c(),r("div",bt,[_(T,{links:(m=n.user_contact)==null?void 0:m.links},null,8,["links"])])):(c(),r("div",xt," No Emails Available ! "))])])])]),_(A,{ModalId:"viewContact",onCloseModal:R},{default:C(()=>{var e,p,u,v;return[t("div",pt,[ut,t("div",_t,i((e=o.value)==null?void 0:e.name),1),yt,t("div",gt,i((p=o.value)==null?void 0:p.email),1),ft,t("div",ht,i((u=o.value)==null?void 0:u.question),1),mt,t("div",vt,i((v=o.value)==null?void 0:v.comment),1),kt,Ct,q(t("input",{"onUpdate:modelValue":s[0]||(s[0]=k=>o.value.reply=k),placeholder:"Question Reply",class:"w-full p-2 text-base text-black font-bold rounded border border-black"},null,512),[[B,o.value.reply]])]),t("div",Nt,[t("button",{onClick:s[1]||(s[1]=k=>S(o.value)),class:g([{"opacity-50":a.value},"px-4 py-1 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg"]),disabled:a.value},"Send",10,$t)])]}),_:1})]}),_:1})],64))}};export{Ut as default};
